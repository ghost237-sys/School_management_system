{# Teacher Sidebar Navigation - Bootstrap Vertical Pills with Mobile Collapse #}
<style>
  /* Scoped styles for teacher sidebar */
  .sidebar-custom {
    width: 240px;
    min-height: 100vh;
    background: var(--sidebar-gradient, linear-gradient(180deg, #1f2937 0%, #0f172a 100%));
    color: #e5e7eb;
    backdrop-filter: saturate(120%) blur(6px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.05);
  }
  .sidebar-custom .brand {
    display: flex; align-items: center; gap: .6rem;
    padding: .25rem .5rem; border-radius: .5rem;
  }
  .sidebar-custom .brand .logo {
    width: 28px; height: 28px; border-radius: 8px;
    background: rgba(255,255,255,.15);
    display: inline-flex; align-items: center; justify-content: center;
    color: #fff;
  }
  .sidebar-custom .nav .nav-link {
    color: #e5e7eb;
    border-radius: .55rem;
    padding: .6rem .75rem;
    display: flex; align-items: center; gap: .6rem;
    transition: background-color .2s ease, color .2s ease, transform .1s ease;
  }
  .sidebar-custom .nav .nav-link .sb-nav-link-icon { width: 1.25rem; display: inline-flex; justify-content: center; }
  .sidebar-custom .nav .nav-link:hover { background: rgba(255,255,255,0.08); color: #fff; transform: translateX(2px); }
  .sidebar-custom .nav .nav-link.active,
  .sidebar-custom .nav .nav-link.active:hover {
    color: #0b1220;
    background: linear-gradient(135deg, #60a5fa 0%, #34d399 100%);
    box-shadow: 0 6px 16px rgba(96,165,250,.35);
  }
  .sidebar-custom .section-label { color: #9ca3af; font-size: .75rem; letter-spacing: .06em; margin: .5rem 0 .25rem; text-transform: uppercase; }
  .sidebar-custom .dropdown-menu-dark { background-color: #111827; border-color: rgba(255,255,255,.08); }
  .sidebar-custom .dropdown-item { color: #e5e7eb; }
  .sidebar-custom .dropdown-item:hover { background-color: rgba(255,255,255,.08); color: #fff; }
  .sidebar-divider { height: 1px; background: rgba(255,255,255,0.08); margin: .5rem 0 1rem; }
  .sidebar-custom .btn-secondary { background: rgba(255,255,255,0.12); border: none; }
  .sidebar-custom .btn-secondary:hover { background: rgba(255,255,255,0.18); }
  .sidebar-footnote { color: #9ca3af; font-size: .75rem; }
  /* Mobile floating action button (FAB) to open nav) */
  .teacher-fab {
    position: fixed; left: 18px; bottom: 18px; z-index: 1060;
    width: 54px; height: 54px; border-radius: 50%;
    display: grid; place-items: center;
    background: color-mix(in srgb, var(--surface) 85%, transparent);
    backdrop-filter: blur(10px) saturate(130%);
    -webkit-backdrop-filter: blur(10px) saturate(130%);
    border: 1px solid var(--border);
    box-shadow: var(--shadow);
    color: var(--text);
    cursor: pointer;
    transition: transform .2s ease, background .2s ease, color .2s ease, border-color .2s ease;
  }
  .teacher-fab:hover { transform: translateY(-2px); }
</style>
{# Mobile: Floating button to open offcanvas (only visible < md) #}
<button class="teacher-fab" type="button" data-bs-toggle="offcanvas" data-bs-target="#teacherOffcanvas" aria-controls="teacherOffcanvas" aria-label="Open navigation menu">
  <i class="bi bi-list"></i>
  <span class="visually-hidden">Open navigation</span>
</button>

<div class="offcanvas offcanvas-start" tabindex="-1" id="teacherOffcanvas" aria-labelledby="teacherOffcanvasLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="teacherOffcanvasLabel">Teacher Panel</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="nav flex-column">
      {% if teacher %}
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'teacher_dashboard' %}active{% endif %}" href="{% url 'teacher_dashboard' teacher_id=teacher.id %}"><i class="bi bi-speedometer2 me-2"></i>Dashboard</a></li>
      {% endif %}
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'teacher_messaging' %}active{% endif %}" href="{% url 'teacher_messaging' %}"><i class="bi bi-chat-dots me-2"></i>Messaging</a></li>
      {% if teacher %}
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'gradebook' %}active{% endif %}" href="{% url 'gradebook' teacher_id=teacher.id %}"><i class="bi bi-journal-check me-2"></i>Gradebook</a></li>
      {% endif %}
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'timetable_view' %}active{% endif %}" href="{% url 'timetable_view' %}"><i class="bi bi-calendar3 me-2"></i>Timetable</a></li>
      {% if teacher %}
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name in 'manage_grades,input_grades,exam_results' %}active{% endif %}" href="{% url 'manage_grades' teacher_id=teacher.id %}"><i class="bi bi-card-checklist me-2"></i>Exams</a></li>
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'teacher_lesson_plans' %}active{% endif %}" href="{% url 'teacher_lesson_plans' %}"><i class="bi bi-journal-text me-2"></i>Lesson Plans</a></li>
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'upload_grades' %}active{% endif %}" href="{% url 'upload_grades' teacher_id=teacher.id %}"><i class="bi bi-upload me-2"></i>Upload Grades</a></li>
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'manage_attendance' %}active{% endif %}" href="{% url 'manage_attendance' teacher_id=teacher.id %}"><i class="bi bi-clipboard-check me-2"></i>Attendance</a></li>
      <li class="nav-item"><a class="nav-link {% if request.resolver_match.url_name == 'teacher_profile' %}active{% endif %}" href="{% url 'teacher_profile' teacher_id=teacher.id %}"><i class="bi bi-person-circle me-2"></i>Profile</a></li>
      {% endif %}
    </ul>
    <form method="post" action="{% url 'logout' %}" class="mt-3">
      {% csrf_token %}
      <button type="submit" class="btn btn-outline-danger w-100"><i class="bi bi-box-arrow-right me-2"></i>Logout</button>
    </form>
  </div>
</div>

{# Desktop sidebar (hidden < md) #}
<nav class="sidebar-custom p-3 d-none d-md-flex flex-column justify-content-between">
    <div>
        <div class="brand mb-3">
            <span class="logo"><i class="bi bi-mortarboard"></i></span>
            <h4 class="m-0" style="font-size:1.1rem;">Teacher Panel</h4>
        </div>
        <div class="sidebar-divider"></div>
    </div>
    <ul class="nav nav-pills flex-column mb-auto">
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'teacher_dashboard' %}active{% endif %}" href="{% url 'teacher_dashboard' teacher_id=teacher.id %}" {% if request.resolver_match.url_name == 'teacher_dashboard' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-speedometer2"></i></div>
                Dashboard
            </a>
        </li>
        {% endif %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'teacher_messaging' %}active{% endif %}" href="{% url 'teacher_messaging' %}" {% if request.resolver_match.url_name == 'teacher_messaging' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-chat-dots"></i></div>
                Messaging
            </a>
        </li>
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'gradebook' %}active{% endif %}" href="{% url 'gradebook' teacher_id=teacher.id %}" {% if request.resolver_match.url_name == 'gradebook' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-journal-check"></i></div>
                Gradebook
            </a>
        </li>
        {% endif %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'timetable_view' %}active{% endif %}" href="{% url 'timetable_view' %}" {% if request.resolver_match.url_name == 'timetable_view' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-calendar3"></i></div>
                Timetable
            </a>
        </li>
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name in 'manage_grades,input_grades,exam_results' %}active{% endif %}" href="{% url 'manage_grades' teacher_id=teacher.id %}" {% if request.resolver_match.url_name in 'manage_grades,input_grades,exam_results' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-card-checklist"></i></div>
                Exams
            </a>
        </li>
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'teacher_lesson_plans' %}active{% endif %}" href="{% url 'teacher_lesson_plans' %}" {% if request.resolver_match.url_name == 'teacher_lesson_plans' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-journal-text"></i></div>
                Lesson Plans
            </a>
        </li>
        {% endif %}
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'upload_grades' %}active{% endif %}" href="{% url 'upload_grades' teacher_id=teacher.id %}" {% if request.resolver_match.url_name == 'upload_grades' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-upload"></i></div>
                Upload Grades
            </a>
        </li>
        {% endif %}
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'manage_attendance' %}active{% endif %}" href="{% url 'manage_attendance' teacher_id=teacher.id %}" {% if request.resolver_match.url_name == 'manage_attendance' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-clipboard-check"></i></div>
                Attendance
            </a>
        </li>
        {% endif %}
        {% if teacher %}
        <li class="nav-item mb-2">
            <a class="nav-link {% if request.resolver_match.url_name == 'teacher_profile' %}active{% endif %}" href="{% url 'teacher_profile' teacher_id=teacher.id %}" {% if request.resolver_match.url_name == 'teacher_profile' %}aria-current="page"{% endif %}>
                <div class="sb-nav-link-icon"><i class="bi bi-person-circle"></i></div>
                Profile
            </a>
        </li>
        {% endif %}
    </ul>
    <div class="mt-auto">
        <div class="dropdown">
            <a href="#" class="nav-link d-flex align-items-center" id="notificationDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <div class="sb-nav-link-icon"><i class="bi bi-bell fs-6"></i></div>
                <span class="badge rounded-pill bg-danger ms-1" id="notification-count" style="display: none;"></span>
                <span class="ms-1">Notifications</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="notificationDropdown" id="notification-list" style="width: 280px;">
                <li><a class="dropdown-item" href="#">No new notifications</a></li>
            </ul>
        </div>
        <form method="post" action="{% url 'logout' %}" class="mt-3">
            {% csrf_token %}
            <button type="submit" class="btn btn-secondary w-100 d-flex align-items-center justify-content-center"><i class="bi bi-box-arrow-right me-2"></i> Logout</button>
            <div class="text-center mt-2 sidebar-footnote">v1 · Teacher</div>
        </form>
    </div>
</nav>
